import{a,b as v,i as ue,p as j,h as f,c,m as R,d as k,s as x,e as ce,o as g,f as Ge,_ as b,g as Ke,j as Ye,k as Je,l as Me,n as qe,q as Xe,r as Qe,t as Ze,u as et,v as tt,w as nt,x as T,y as rt,z as st,A as it,B as E,C as fe,D as ot,E as at,F as lt,G as de,H as ut,I as ge,J as ct,K as pe,L as he,M as B,N as ft}from"./chunk-670e134c.js";function P(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function Z(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}function V(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return!!n&&!("value"in n)&&!!n.get}function K(e){a(e.urlOriginal),"urlPathname"in e?a(V(e,"urlPathname")):Object.defineProperty(e,"urlPathname",{get:_e,enumerable:!0,configurable:!0}),"url"in e?a(V(e,"url")):Object.defineProperty(e,"url",{get:dt,enumerable:!1,configurable:!0}),"urlParsed"in e?a(V(e,"urlParsed")):Object.defineProperty(e,"urlParsed",{get:gt,enumerable:!0,configurable:!0})}function me(e){let t=e.urlOriginal;const{_baseUrl:n,_urlProcessor:r}=e;return a(n.startsWith("/")),a(r===null||ue(r)),r!==null&&(t=r(t)),j(t,n)}function _e(){const{pathname:e}=me(this),t=e;return a(t.startsWith("/")),t}function dt(){return v(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),_e.call(this)}function gt(){const e=me(this),{origin:t,pathname:n,pathnameOriginal:r,search:s,searchAll:o,searchOriginal:i,hash:l,hashOriginal:d}=e,p={origin:t,pathname:n,pathnameOriginal:r,search:s,searchAll:o,searchOriginal:i,hash:l,hashOriginal:d,get hashString(){return v(!1,"`pageContext.urlParsed.hashString` has been renamed to `pageContext.urlParsed.hashOriginal`",{onlyOnce:!0,showStackTrace:!0}),d},get searchString(){return v(!1,"`pageContext.urlParsed.searchString` has been renamed to `pageContext.urlParsed.searchOriginal`",{onlyOnce:!0,showStackTrace:!0}),i}};return ee(p,"hashString"),ee(p,"searchString"),p}function ee(e,t){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...n,enumerable:!1})}function pt(e){a(typeof e.urlOriginal=="string"),a(typeof e.urlPathname=="string"),a(P(e.urlParsed)),a(e.urlPathname===e.urlParsed.pathname)}function ht(e,t){if(!P(e))return!1;for(const n of Object.keys(e))if(!t.includes(n))return!1;return!0}function mt(e){return f(e,"then")&&ue(e.then)}const Y="@",G=":";function J(e,t){c(e==="*"||e.startsWith("/"),`Invalid route string \`${e}\`${e===""?" (empty string)":""}: route strings should start with a leading slash \`/\` (or be \`*\`).`),a(t.startsWith("/"));const n=e.split("/"),r=t.split("/"),s={};_t(e),e==="*"&&(e="/*");for(let o=0;o<Math.max(n.length,r.length);o++){const i=n[o],l=r[o];if(i==="*")return s["*"]=r.slice(Math.max(1,o)).join("/"),{routeParams:s};if(i&&W(i)){if(v(!i.startsWith(G),`Outdated route string \`${e}\`, use \`${e.split(G).join(Y)}\` instead.`,{onlyOnce:!0}),!l)return null;s[i.slice(1)]=l}else if((i||"")!==(l||""))return null}return{routeParams:s}}function _t(e){const t=e.split("*").length-1;c(t<=1,`Invalid route string \`${e}\`: route strings are not allowed to contain more than one glob character \`*\`.`),c(t===0||t===1&&e.endsWith("*"),`Invalid route string \`${e}\`: make sure your route string ends with the glob character \`*\`.`)}function A(e){const t=e.split("/").filter(i=>i!==""&&i!=="*");let n=0;for(const i of t){if(W(i))break;n++}const r=t.filter(i=>!W(i)).length,s=t.filter(i=>W(i)).length,o=e.endsWith("*");return{numberOfParameterSegments:s,numberOfStaticSegmentsBeginning:n,numberOfStaticSegements:r,isCatchAll:o}}function W(e){return e.startsWith(Y)||e.startsWith(G)}function te(e){const n=J(e,e);return n!==null&&Object.keys(n.routeParams).length===0}function yt(e){e.sort(vt).sort(R(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort(R(t=>t.routeType==="STRING"&&te(t.routeString)===!1)).sort(R(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort(R(t=>t.routeType==="STRING"&&te(t.routeString)===!0)).sort(R(t=>t.routeType==="FILESYSTEM")).sort(R(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function vt(e,t){var n,r;{const s=(n=e.precedence)!==null&&n!==void 0?n:0,o=(r=t.precedence)!==null&&r!==void 0?r:0;if(s!==o)return s>o?-1:1}if(!t.routeString||!e.routeString)return 0;{const o=k(i=>A(i).numberOfStaticSegmentsBeginning)(e.routeString,t.routeString);if(o!==0)return o}{const o=k(i=>A(i).numberOfStaticSegements)(e.routeString,t.routeString);if(o!==0)return o}{const o=k(i=>A(i).numberOfParameterSegments)(e.routeString,t.routeString);if(o!==0)return o}{if(A(t.routeString).isCatchAll)return-1;if(A(e.routeString).isCatchAll)return 1}return 0}function bt(e,t){return St(e)?J(e,t):Pt(e,t)}function Pt(e,t){return t=wt(t),a(t.startsWith("/")),a(e.startsWith("/")),a(!t.endsWith("/")||t==="/"),a(!e.endsWith("/")||e==="/"),t!==e?null:{routeParams:{}}}function wt(e){if(!e.endsWith("/"))return e;for(;e.endsWith("/");)e=x(e,0,-1);return e===""?"/":e}function Rt(e,t){const r=t.filter(({filesystemRoot:o})=>e.startsWith(o)).sort(k(({filesystemRoot:o})=>o.length))[0];let s;if(r){const{filesystemRoot:o,routeRoot:i}=r,l={pageId:e,filesystemRoot:o,routeRoot:i};a(i.startsWith("/")&&e.startsWith("/")&&o.startsWith("/"),l),a(e.startsWith(o),l),o!=="/"?(a(!o.endsWith("/"),l),s=x(e,o.length,0)):s=e,a(s.startsWith("/"),l),s=i+(i.endsWith("/")?"":"/")+x(s,1,0)}else s=e;return a(s.startsWith("/")),s=s.split("/").filter(o=>o!=="pages"&&o!=="src"&&o!=="index").join("/"),a(!s.includes(".page.")),a(!s.endsWith(".")),s.endsWith("/index")&&(s=x(s,0,-6)),s===""&&(s="/"),a(s.startsWith("/")),a(!s.endsWith("/")||s==="/"),s}function St(e){return e.includes(Y)}async function xt(e,t,n){pt(t);let r=e.default(t);if(c(!mt(r)||e.iKnowThePerformanceRisksOfAsyncRouteFunctions,`The Route Function ${n} returned a promise; async route functions are opt-in, see https://vite-plugin-ssr.com/route-function#async`),r=await r,r===!1)return null;if(r===!0&&(r={}),c(P(r),`The Route Function ${n} should return a boolean or a plain JavaScript object, instead it returns \`${f(r,"constructor")?r.constructor:r}\`.`),"match"in r){const{match:i}=r;if(c(typeof i=="boolean",`The \`match\` value returned by the Route Function ${n} should be a boolean.`),!i)return null}let s=null;"precedence"in r&&(s=r.precedence,c(typeof s=="number",`The \`precedence\` value returned by the Route Function ${n} should be a number.`)),ye(r,`The \`routeParams\` object returned by the Route Function ${n} should`);const o=r.routeParams||{};return c(!("pageContext"in r),"Providing `pageContext` in Route Functions is forbidden, see https://vite-plugin-ssr.com/route-function#async"),a(P(o)),Object.keys(r).forEach(i=>{c(i==="match"||i==="routeParams"||i==="precedence",`The Route Function ${n} returned an object with an unknown key \`{ ${i} }\`. Allowed keys: ['match', 'routeParams', 'precedence'].`)}),{precedence:s,routeParams:o}}function ye(e,t){a(t.endsWith(" should")),f(e,"routeParams")&&(c(P(e.routeParams),`${t} be a plain JavaScript object.`),c(Object.values(e.routeParams).every(n=>typeof n=="string"),`${t} only hold string values.`))}function ve(e,{hook:t,errorMessagePrefix:n}){if(!n){a(t);const{hookName:r,hookFilePath:s}=t;a(s.startsWith("/")),a(!r.endsWith(")")),n=`The \`pageContext\` provided by the \`export { ${r} }\` of ${s}`}c(ce(e),`${n} should be an object.`),c(!("_objectCreatedByVitePluginSsr"in e),`${n} should not be the whole \`pageContext\` object, see https://vite-plugin-ssr.com/pageContext-manipulation#do-not-return-entire-pagecontext`),v(!("_pageId"in e),"You are using `onBeforeRoute()` to override vite-plugin-ssr routing. This is experimental: make sure to contact a vite-plugin-ssr maintainer before using this.",{onlyOnce:!0})}async function Ot(e,t){const n=await e.onBeforeRoute(t),r=`The \`onBeforeRoute()\` hook exported by ${e.filePath}`;if(c(n==null||ht(n,["pageContext"])&&f(n,"pageContext"),`${r} should return \`null\`, \`undefined\`, or a plain JavaScript object \`{ pageContext: { /* ... */ } }\`.`),n==null)return null;if(c(f(n,"pageContext","object"),`${r} returned \`{ pageContext }\` but \`pageContext\` should be a plain JavaScript object.`),f(n.pageContext,"_pageId")&&!f(n.pageContext,"_pageId","null")){const o=`${r} returned \`{ pageContext: { _pageId } }\` but \`_pageId\` should be`;c(f(n.pageContext,"_pageId","string"),`${o} a string or \`null\``),c(t._allPageIds.includes(n.pageContext._pageId),`${o} one of following values: \`[${t._allPageIds.map(i=>`'${i}'`).join(", ")}]\`.`)}f(n.pageContext,"routeParams")&&ye(n.pageContext,`${r} returned \`{ pageContext: { routeParams } }\` but \`routeParams\` should`);const s={};return f(n.pageContext,"url")&&(v(!1,`${r} returned \`{ pageContext: { url } }\` but \`pageContext.url\` has been renamed to \`pageContext.urlOriginal\`. Return \`{ pageContext: { urlOriginal } }\` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)`,{onlyOnce:!0}),n.pageContext.urlOriginal=n.pageContext.url,delete n.pageContext.url),f(n.pageContext,"urlOriginal")&&(c(f(n.pageContext,"urlOriginal","string"),`${r} returned \`{ pageContext: { urlOriginal } }\` but \`urlOriginal\` should be a string`),g(s,{_urlPristine:t.urlOriginal})),ve(n.pageContext,{hook:{hookFilePath:e.filePath,hookName:"onBeforeRoute"}}),g(s,n.pageContext),s}async function Ft(e){let t=null;const n=[];await Promise.all(e._pageFilesAll.filter(i=>i.fileType===".page.route").map(i=>{var l;return(l=i.loadFile)===null||l===void 0?void 0:l.call(i)})),e._pageFilesAll.filter(i=>i.fileType===".page.route"&&i.isDefaultPageFile).forEach(({filePath:i,fileExports:l})=>{if(a(l),"onBeforeRoute"in l){c(f(l,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${i} should be a function.`);const{onBeforeRoute:d}=l;t={filePath:i,onBeforeRoute:d}}"filesystemRoutingRoot"in l&&(c(f(l,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${i} should be a string.`),c(f(l,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${i} is \`'${l.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),n.push({filesystemRoot:Et(i),routeRoot:l.filesystemRoutingRoot}))});const r=e._allPageIds,s=[];return r.filter(i=>!Ge(i)).filter(i=>{const l=At(i,e._pageFilesAll);if(!l)return!0;const{filePath:d,fileExports:p}=l;a(p),c("default"in p,`${d} should have a default export.`),c(f(p,"default","string")||f(p,"default","function"),`The default export of ${d} should be a string or a function.`),c(!("iKnowThePerformanceRisksOfAsyncRouteFunctions"in p)||f(p,"iKnowThePerformanceRisksOfAsyncRouteFunctions","boolean"),`The export \`iKnowThePerformanceRisksOfAsyncRouteFunctions\` of ${d} should be a boolean.`);const u=p.default;return s.push({pageId:i,filesystemRoute:null,pageRouteFile:{filePath:d,fileExports:p,routeValue:u}}),!1}).forEach(i=>{const l=Rt(i,n);a(l.startsWith("/")),a(!l.endsWith("/")||l==="/"),s.push({pageId:i,filesystemRoute:l,pageRouteFile:null})}),{pageRoutes:s,onBeforeRouteHook:t}}function At(e,t){return t.find(n=>n.pageId===e&&n.fileType===".page.route")}function Et(e){a(e.startsWith("/")),a(!e.endsWith("/"));const t=e.split("/"),n=x(t,0,-1).join("/")||"/";return a(n.startsWith("/")),a(!n.endsWith("/")||n==="/"),n}var C;function ne(...e){var t,n;C||(C=(n=(t=globalThis).__brillout_debug_createDebugger)===null||n===void 0?void 0:n.call(t,"vps:routing")),C&&C(...e)}async function be(e){K(e);const{pageRoutes:t,onBeforeRouteHook:n}=await Ft(e);ne("Pages routes:",t.map(u=>({pageId:u.pageId,filesystemRoute:u.filesystemRoute,pageRouteFile:u.pageRouteFile&&{filePath:u.pageRouteFile.filePath,routeValue:u.pageRouteFile.routeValue}})));const r={};if(n){const u=await Ot(n,e);if(u){if(g(r,u),f(r,"_pageId","string")||f(r,"_pageId","null"))return f(r,"routeParams")?a(f(r,"routeParams","object")):g(r,{routeParams:{}}),g(r,{_routingProvidedByOnBeforeRouteHook:!0,_routeMatches:"CUSTOM_ROUTE"}),{pageContextAddendum:r};g(e,r)}}g(r,{_routingProvidedByOnBeforeRouteHook:!1});const s=e._allPageIds;a(s.length>=0),c(s.length>0,"No `*.page.js` file found. You must create a `*.page.js` file, e.g. `pages/index.page.js` (or `pages/index.page.{jsx, tsx, vue, ...}`).");const{urlPathname:o}=e;a(o.startsWith("/"));const i=[];await Promise.all(t.map(async u=>{const{pageId:m,filesystemRoute:O,pageRouteFile:F}=u;if(F){const _=F.fileExports,w=F.filePath;if(f(_,"default","string")){const h=_.default;c(h.startsWith("/"),`A Route String should start with a leading \`/\` but \`${w}\` has \`export default '${h}'\`. Make sure to \`export default '/${h}'\` instead.`);const y=J(h,o);if(y){const{routeParams:U}=y;i.push({pageId:m,routeString:h,routeParams:U,routeType:"STRING"})}}else if(f(_,"default","function")){const h=await xt(_,e,w);if(h){const{routeParams:y,precedence:U}=h;i.push({pageId:m,precedence:U,routeParams:y,routeType:"FUNCTION"})}}else a(!1)}else{const _=bt(O,o);if(_){const{routeParams:w}=_;i.push({pageId:m,routeParams:w,routeType:"FILESYSTEM"})}}})),yt(i);const l=i[0];if(ne(`Route matches for URL \`${o}\` (in precedence order):`,i),g(r,{_routeMatches:i}),!l)return g(r,{_pageId:null,routeParams:{}}),{pageContextAddendum:r};const{pageId:d,routeParams:p}=l;return a(P(p)),g(r,{_pageId:d,routeParams:p}),{pageContextAddendum:r}}const M={},Pe={},Tt={},H={},Ct={},It=!0,kt={"/src/pages/developer.page.tsx":()=>b(()=>import("./src/pages/developer.page.f1eed4e6.js"),["assets/src/pages/developer.page.f1eed4e6.js","assets/developer.page.c8bb1dc8.css","assets/chunk-0fbd60c8.js","assets/Paragraph.0557596b.css","assets/chunk-22372364.js","assets/chunk-84d3d8b2.js","assets/Text.24efd480.css","assets/chunk-bd9e3544.js","assets/chunk-8190dc96.js","assets/chunk-7f30580b.js","assets/Video.f8b57660.css","assets/src/views/Grid.page.cb51027a.js","assets/Grid.page.bc283ea9.css"]),"/src/pages/index.page.tsx":()=>b(()=>import("./src/pages/index.page.a0e2e223.js"),["assets/src/pages/index.page.a0e2e223.js","assets/index.page.154d2e68.css","assets/chunk-84d3d8b2.js","assets/Text.24efd480.css","assets/chunk-bd9e3544.js","assets/chunk-22372364.js","assets/chunk-8190dc96.js"]),"/src/pages/musician.page.tsx":()=>b(()=>import("./src/pages/musician.page.38498c48.js"),["assets/src/pages/musician.page.38498c48.js","assets/chunk-0fbd60c8.js","assets/Paragraph.0557596b.css","assets/chunk-22372364.js","assets/chunk-84d3d8b2.js","assets/Text.24efd480.css","assets/chunk-bd9e3544.js","assets/chunk-8190dc96.js","assets/chunk-7f30580b.js","assets/Video.f8b57660.css","assets/chunk-47d57d76.js","assets/Iframe.4c98e8f9.css","assets/src/views/Grid.page.cb51027a.js","assets/Grid.page.bc283ea9.css"]),"/src/pages/photographer.page.tsx":()=>b(()=>import("./src/pages/photographer.page.4495b367.js"),["assets/src/pages/photographer.page.4495b367.js","assets/chunk-0fbd60c8.js","assets/Paragraph.0557596b.css","assets/chunk-22372364.js","assets/chunk-84d3d8b2.js","assets/Text.24efd480.css","assets/chunk-bd9e3544.js","assets/chunk-8190dc96.js","assets/chunk-7f30580b.js","assets/Video.f8b57660.css","assets/src/views/Grid.page.cb51027a.js","assets/Grid.page.bc283ea9.css"]),"/src/pages/river.page.tsx":()=>b(()=>import("./src/pages/river.page.938cec72.js"),["assets/src/pages/river.page.938cec72.js","assets/chunk-0fbd60c8.js","assets/Paragraph.0557596b.css","assets/chunk-22372364.js","assets/chunk-84d3d8b2.js","assets/Text.24efd480.css","assets/chunk-bd9e3544.js","assets/chunk-8190dc96.js","assets/src/views/Grid.page.cb51027a.js","assets/Grid.page.bc283ea9.css","assets/chunk-182d099b.js","assets/Image.32a99c96.css","assets/chunk-705f3e9c.js"]),"/src/pages/stay-at-home.page.tsx":()=>b(()=>import("./src/pages/stay-at-home.page.b1078447.js"),["assets/src/pages/stay-at-home.page.b1078447.js","assets/chunk-0fbd60c8.js","assets/Paragraph.0557596b.css","assets/chunk-22372364.js","assets/chunk-84d3d8b2.js","assets/Text.24efd480.css","assets/chunk-bd9e3544.js","assets/chunk-8190dc96.js","assets/src/views/Grid.page.cb51027a.js","assets/Grid.page.bc283ea9.css","assets/chunk-182d099b.js","assets/Image.32a99c96.css","assets/chunk-47d57d76.js","assets/Iframe.4c98e8f9.css"]),"/src/pages/that-day-everyone-left.page.tsx":()=>b(()=>import("./src/pages/that-day-everyone-left.page.4f2331dd.js"),["assets/src/pages/that-day-everyone-left.page.4f2331dd.js","assets/chunk-0fbd60c8.js","assets/Paragraph.0557596b.css","assets/chunk-22372364.js","assets/chunk-84d3d8b2.js","assets/Text.24efd480.css","assets/chunk-bd9e3544.js","assets/chunk-8190dc96.js","assets/src/views/Grid.page.cb51027a.js","assets/Grid.page.bc283ea9.css","assets/chunk-182d099b.js","assets/Image.32a99c96.css","assets/chunk-705f3e9c.js"]),"/src/views/Grid.page.tsx":()=>b(()=>import("./src/views/Grid.page.cb51027a.js"),["assets/src/views/Grid.page.cb51027a.js","assets/Grid.page.bc283ea9.css","assets/chunk-22372364.js","assets/chunk-bd9e3544.js"])},Wt={...kt};M[".page"]=Wt;const $t={},Nt={...$t};Pe[".page.route"]=Nt;const jt={"/src/renderer/_default.page.client.tsx":()=>b(()=>import("./src/renderer/_default.page.client.0935f2d8.js"),["assets/src/renderer/_default.page.client.0935f2d8.js","assets/_default.page.client.862186b6.css","assets/chunk-bd9e3544.js","assets/chunk-8190dc96.js"])},Ht={...jt};M[".page.client"]=Ht;const Lt={"/src/renderer/_default.page.client.tsx":Ke},Ut={...Lt};H[".page.client"]=Ut;const Bt={"/src/renderer/_default.page.server.tsx":Ye},Vt={...Bt};H[".page.server"]=Vt;const Dt={"/src/pages/developer.page.tsx":Je,"/src/pages/index.page.tsx":Me,"/src/pages/musician.page.tsx":qe,"/src/pages/photographer.page.tsx":Xe,"/src/pages/river.page.tsx":Qe,"/src/pages/stay-at-home.page.tsx":Ze,"/src/pages/that-day-everyone-left.page.tsx":et,"/src/views/Grid.page.tsx":tt},zt={...Dt};H[".page"]=zt;const Gt=Object.freeze(Object.defineProperty({__proto__:null,pageFilesLazy:M,pageFilesEager:Pe,pageFilesExportNamesLazy:Tt,pageFilesExportNamesEager:H,neverLoaded:Ct,isGeneratedFile:It},Symbol.toStringTag,{value:"Module"}));nt(Gt);function we(){const e="/";return Kt(e)?"/":e}function Kt(e){return!!e.startsWith("http")}function Re(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}function Yt(e,t){let n=!1;return()=>{n||(n=!0,setTimeout(()=>{n=!1,e()},t))}}function Jt(e){return j(e,"/").pathname}function L(e){window.location.href=e}const Mt="/";function qt(e,t,n){a(t!==".pageContext.json"||n===!0);const{pathnameOriginal:r,searchOriginal:s,hashOriginal:o}=j(e,Mt);e.startsWith("/")&&a(e===`${r}${s||""}${o||""}`,{url:e});let i=r;if(n)i.endsWith("/")&&(i=x(i,0,-1)),a(!i.endsWith("/")),i===""&&(i="/index");else{const d=r.endsWith("/")?"":"/";i=i+`${d}index`}return`${i}${t}${s||""}${o||""}`}function Xt(){return!!Qt()}function Qt(){var e,t,n,r;const s=!!(!((t=(e=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)===null||e===void 0?void 0:e.renderers)===null||t===void 0)&&t.size),o=!!(!((r=(n=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)===null||n===void 0?void 0:n.rendererInterfaces)===null||r===void 0)&&r.size),i=!!window.__vite_plugin_react_preamble_installed__,l=!!window.$RefreshReg$,d=p=>{v(p,"An internal heuristic needs to be updated, see https://github.com/brillout/vite-plugin-ssr/issues/423",{onlyOnce:!0})};return s||o?(d(s&&o&&i&&l),!0):i||l?(a(s===!1&&o===!1),d(i&&l),!0):!1}function Zt(e,t){return(e==null?void 0:e.message)===(t==null?void 0:t.message)}function en(e){return new Promise(t=>setTimeout(t,e))}const tn=T();let re=!1;const Se={markNavigationChange(){re=!0},get noNavigationChangeYet(){return!re&&this.isFirstUrl(T())},isFirstUrl(e){return e===tn}};function xe(e,t){return rt(e,t)}async function nn(e,t){const r=xe(e,t).filter(o=>o.fileType===".page.server");return await Promise.all(r.map(async o=>{o.exportNames||(a(o.loadExportNames,t),await o.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:r.some(({exportNames:o})=>(a(o),o.includes("onBeforeRender")))}}function rn(e,t,n,r){a(!t.endsWith(")"));const s=`The \`export { ${t} }\` of ${r}`;c(e==null||P(e),`${s} should return \`null\`, \`undefined\`, or a plain JavaScript object.`),e!=null&&(sn(e,n,s),"pageContext"in e&&ve(e.pageContext,{hook:{hookName:t,hookFilePath:r}}))}function sn(e,t,n){const r=[],s=Object.keys(e);for(const o of s)t.includes(o)||r.push(o);c(r.length===0,[n,"returned an object with unknown keys",Z(r)+".","Only following keys are allowed:",Z(t)+"."].join(" "))}function Oe(e){return a([!0,!1].includes(e.isHydration)),a([!0,!1,null].includes(e.isBackwardNavigation)),st(e)}const se=["urlPathname","urlParsed"],on=["Page","pageExports","exports"];function Fe(e){[...on,...se].forEach(n=>{n in e&&(se.includes(n)?(a(n.startsWith("url")),v(!1,`\`pageContext.${n}\` is already available in the browser when using \`useClientRouter()\`; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0})):v(!1,`\`pageContext.${n}\` is a built-in that cannot be overriden; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0}),delete e[n])})}async function an(e){return e._isFirstRenderAttempt&&Se.isFirstUrl(e.urlOriginal)?(a(f(e,"_isFirstRenderAttempt","true")),ln(e)):(a(f(e,"_isFirstRenderAttempt","false")),cn(e))}async function ln(e){const t=it();return Fe(t),g(t,{isHydration:!0,_comesDirectlyFromServer:!0}),g(t,await E(e._pageFilesAll,t._pageId)),t}async function un(e){const t=fe(e._allPageIds);if(!t)throw new Error("No error page");const n={isHydration:!1,_pageId:t,_pageContextRetrievedFromServer:null,_comesDirectlyFromServer:!1};return g(n,await E(e._pageFilesAll,n._pageId)),n}async function cn(e){let t={};g(t,{isHydration:!1}),g(t,await dn(e)),g(t,await E(e._pageFilesAll,t._pageId));const n=await fn({...e,...t});if(a([!0,!1].includes(n._comesDirectlyFromServer)),n._isError){t={},a(n._comesDirectlyFromServer===!0),a(f(n,"is404","boolean")),a(f(n,"pageProps","object")),a(f(n.pageProps,"is404","boolean")),a(!("serverSideError"in n));const r=fe(e._allPageIds);return a(r),g(t,{isHydration:!1,_pageId:r}),g(t,n),g(t,await E(e._pageFilesAll,t._pageId)),t}else return g(t,n),t}async function fn(e){const t=ot(e,"onBeforeRender");if(t){const r=t.hook,s={_comesDirectlyFromServer:!1,_pageContextRetrievedFromServer:null},o=Oe({...e,...s}),i=await r(o);rn(i,"onBeforeRender",["pageContext"],t.filePath);const l=i==null?void 0:i.pageContext;return g(s,l),s}else if((await nn(e._pageFilesAll,e._pageId)).hasOnBeforeRenderServerSideOnlyHook){const r=await gn(e),s={};return Object.assign(s,r),g(s,{_comesDirectlyFromServer:!0,_pageContextRetrievedFromServer:r}),s}return{_comesDirectlyFromServer:!1,_pageContextRetrievedFromServer:null}}async function dn(e){const n=(await be(e)).pageContextAddendum;if(!n._pageId)throw new Error("No routing match");return a(f(n,"_pageId","string")),n}async function gn(e){var t;const n=qt((t=e._urlPristine)!==null&&t!==void 0?t:e.urlOriginal,".pageContext.json",!0),r=await fetch(n);{const l=r.headers.get("content-type"),d=l&&l.includes("application/json");if(!d&&r.status===404){L(e.urlOriginal);const p=new Error("Page doesn't exist");throw Object.assign(p,{_abortRendering:!0}),p}c(d,`Wrong HTTP Response Header \`content-type\` value for URL ${n} (it should be \`application/json\` but we got \`${l}\`). Make sure to use \`pageContext.httpResponse.contentType\`, see https://github.com/brillout/vite-plugin-ssr/issues/191`)}const s=await r.text(),o=at(s);if("serverSideError"in o)throw lt("`pageContext` could not be fetched from the server as an error occurred on the server; check your server logs.");a(f(o,"pageContext"));const i=o.pageContext;return a(P(i)),a(f(i,"_pageId","string")),Fe(i),i}let D;async function Ae(){return D||(D=await pn()),D}async function pn(){const e=we();de(e);const t={_urlProcessor:null,_baseUrl:e,_objectCreatedByVitePluginSsr:!0,_isProduction:!0},{pageFilesAll:n,allPageIds:r}=await ut(!0);return g(t,{_pageFilesAll:n,_allPageIds:r}),t}async function Ee(e){const t=await Ae(),n={urlOriginal:e,...t},r=t._pageFilesAll;K(n);const s=await be(n);if(!("pageContextAddendum"in s))return{pageId:null,pageFilesAll:r};const o=s.pageContextAddendum._pageId;return o?{pageId:o,pageFilesAll:r}:{pageId:null,pageFilesAll:r}}function $(e){return e.exportNames?e.exportNames:(a(e.fileExports,e.pageId),Object.keys(e.fileExports))}function hn({pageFilesClientSide:e,pageFilesServerSide:t,pageId:n}){return{isHtmlOnly:r(),isClientRouting:o()};function r(){return t.some(d=>d.pageId===n&&d.fileType===".page")?(s(),!1):t.some(d=>d.pageId===n&&d.fileType===".page.server")}function s(){const i=e.some(l=>$(l).includes("render"));c(i,["No client-side `render()` hook found.","See https://vite-plugin-ssr.com/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((l,d)=>` (${d+1}): ${l.filePath}`)].join(`
`)].join(" "))}function o(){return e.some(l=>$(l).includes("clientRouting"))}}function mn({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:n,isClientRouting:r}){let s=[];const o=t.filter(l=>!e.includes(l)),i=[];if(i.push(...e.map(l=>({id:l.filePath,onlyAssets:!1}))),i.push(...o.map(l=>({id:l.filePath,onlyAssets:!0}))),n)s=e.map(l=>l.filePath);else{const l=r?"@@vite-plugin-ssr/dist/esm/client/router/entry.js":"@@vite-plugin-ssr/dist/esm/client/entry.js";i.push({id:l,onlyAssets:!1}),s=[l]}return{clientEntries:s,clientDependencies:i}}function _n(e,t){let n=ge(e,t);const r=xe(e,t),{isHtmlOnly:s,isClientRouting:o}=hn({pageFilesClientSide:n,pageFilesServerSide:r,pageId:t});s&&(n=n.filter(d=>d.fileType===".page.client"&&!$(d).includes("render")),n=vn(n));const{clientEntries:i,clientDependencies:l}=mn({pageFilesClientSide:n,pageFilesServerSide:r,isHtmlOnly:s,isClientRouting:o});return{isHtmlOnly:s,isClientRouting:o,clientEntries:i,clientDependencies:l,pageFilesClientSide:n,pageFilesServerSide:r}}async function yn(e,t,{sharedPageFilesAlreadyLoaded:n}){const r=ge(e,t);await Promise.all(r.map(async s=>{var o;a(s.fileType===".page"||s.fileType===".page.client"),!(n&&s.fileType===".page")&&await((o=s.loadExportNames)===null||o===void 0?void 0:o.call(s))}))}function vn(e){const t=[];for(const n of e)if(t.push(n),$(n).includes("overrideDefaultPages"))break;return t}async function Te(e){const{pageId:t,pageFilesAll:n}=await Ee(e);if(!t)return!1;await yn(n,t,{sharedPageFilesAlreadyLoaded:!1});const{isHtmlOnly:r,isClientRouting:s}=_n(n,t);return!r&&s}function Ce(e){const t=e.getAttribute("href");return!!(t===null||t===""||Re(t)||bn(e)||Pn(t)||!wn(t)||!ct(t))}function bn(e){const t=e.getAttribute("target"),n=e.getAttribute("rel");return t==="_blank"||t==="_external"||n==="external"||e.hasAttribute("download")}function Pn(e){if(e.startsWith("#"))return!0;const t=n=>n.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function wn(e){const t=we();de(t);const{hasBaseUrl:n}=j(e,t);return n}function Rn(e,t){const n=Sn(e,t);return{prefetchPageContext:!1,prefetchStaticAssets:n}}function Sn(e,t){let n=xn(t),r=(()=>{if(n!==null)return n===!0?{when:"VIEWPORT"}:{when:"HOVER"};if("prefetchLinks"in e.exports&&c(n===null,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:s}=e.exports;if(s===!1)return!1;const o="`prefetchStaticAssets` should be either `false`, `{ when: 'VIEWPORT' }`, or `{ when: 'HOVER' }`";c(P(s),o);const i=Object.keys(s);c(i.length===1&&i[0]==="when",o);const{when:l}=s;if(l==="HOVER"||l==="VIEWPORT")return{when:l};c(!1,o)}return{when:"HOVER"}})();return r&&r.when==="VIEWPORT"&&!e._isProduction&&(pe(!1,"Viewport prefetching is disabled in development",{onlyOnce:!0}),r={when:"HOVER"}),r}function xn(e){let t=e.getAttribute("data-prefetch");if(v(t===null,"The `data-prefetch` attribute is outdated.",{onlyOnce:!0}),t===null)return null;if(a(typeof t=="string"),t==="true")return!0;if(t==="false")return!1;c(!1,`Wrong data-prefetch value: \`"${t}"\`; it should be \`"true"\` or \`"false"\`.`)}const Ie=new Map;function ke(e){const t=$e(e);return Ie.has(t)}function We(e){const t=$e(e);Ie.set(t,!0)}function $e(e){return Jt(e)}const ie=new Map;async function z(e){if(c(!Re(e),`You are trying to prefetch ${e} which is an external URL. This doesn't make sense since vite-plugin-ssr cannot prefetch external links.`),ke(e))return;We(e);const{pageId:t,pageFilesAll:n}=await Ee(e);if(t)try{await E(n,t)}catch(r){if(he(r))Be();else throw r}}function On(e){We(e.urlOriginal),[...document.getElementsByTagName("A")].forEach(async n=>{if(ie.has(n))return;ie.set(n,!0);const r=n.getAttribute("href");if(Ce(n)||(a(r),!await Te(r))||ke(r))return;const s=Rn(e,n);if(s.prefetchStaticAssets){if(s.prefetchStaticAssets.when==="HOVER")n.addEventListener("mouseover",()=>z(r)),n.addEventListener("touchstart",()=>z(r),{passive:!0});else if(s.prefetchStaticAssets.when==="VIEWPORT"){const o=new IntersectionObserver(i=>{i.forEach(l=>{l.isIntersecting&&(z(r),o.disconnect())})});o.observe(n)}}else return})}function Ne(){let e=window.history.state;e||(e={});let t=!1;"timestamp"in e||(t=!0,e.timestamp=He()),"scrollPosition"in e||(t=!0,e.scrollPosition=je()),Le(e),t&&X(e)}function q(){const e=window.history.state||{};return Le(e),e}function je(){return{x:window.scrollX,y:window.scrollY}}function He(){return new Date().getTime()}function oe(){const e=je(),t=q();X({...t,scrollPosition:e})}function Fn(e,t){if(t)X(q(),e);else{const n=He();An({timestamp:n,scrollPosition:null},e)}}function Le(e){if(a(ce(e)),"timestamp"in e){const{timestamp:t}=e;a(typeof t=="number")}if("scrollPosition"in e){const{scrollPosition:t}=e;t!==null&&a(f(t,"x","number")&&f(t,"y","number"))}}function X(e,t){window.history.replaceState(e,"",t)}function An(e,t){window.history.pushState(e,"",t)}Nn();Ne();let I,Ue=!1;function Be(){Ue=!0,pe(!1,"New deployed frontend detected. The next page navigation will use Server Routing instead of Client Routing.",{onlyOnce:!0})}function En(){Wn(),Tn((s,{keepScrollPosition:o})=>{r({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",url:s,isBackwardNavigation:!1})}),Cn((s,o)=>{r({scrollTarget:s,isBackwardNavigation:o})}),globalThis.__vite_plugin_ssr__navigate=async(s,{keepScrollPosition:o,overwriteLastHistoryEntry:i})=>{await r({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",url:s,overwriteLastHistoryEntry:i,isBackwardNavigation:!1})};let e=0,t,n=!1;r({scrollTarget:"preserve-scroll",isBackwardNavigation:null});return;async function r({scrollTarget:s,url:o=T(),overwriteLastHistoryEntry:i=!1,isBackwardNavigation:l}){var d,p;if(Ue){L(o);return}const u={urlOriginal:o,isBackwardNavigation:l},m=++e;a(m>=1),m>1&&n===!1&&(I==null||I(u),n=!0);const O=()=>Xt()&&m===1?!1:m!==e,F=await Ae();if(O())return;const _=m===1;g(u,{_isFirstRenderAttempt:_}),g(u,F),K(u);let w;try{w=await an(u)}catch(h){if(le(h,u))return;console.error(h);try{w=await un(u)}catch(y){if(le(y,u)||(_||setTimeout(()=>{window.location.pathname=o},0),Zt(h,y)))return;throw y}}O()||(g(u,w),B(u,"onPageTransitionStart"),I=u.exports.onPageTransitionStart,t&&await t,!O()&&(In(o,i),Se.markNavigationChange(),a(t===void 0),t=(async()=>{const h=Oe(u);ft(u);const y=await u.exports.render(h);c(y===void 0,"`export { render }` of "+u.exportsAll.render[0]._filePath+" should not return any value"),On(u)})(),await t,t=void 0,u._isFirstRenderAttempt?(B(u,"onHydrationEnd"),await((p=(d=u.exports).onHydrationEnd)===null||p===void 0?void 0:p.call(d,u))):m===e&&(u.exports.onPageTransitionEnd&&(B(u,"onPageTransitionEnd"),u.exports.onPageTransitionEnd(u)),n=!1),Ve(s),Q(),De=!0))}}function Tn(e){document.addEventListener("click",t);return;async function t(s){if(!n(s))return;const o=r(s.target);if(!o)return;const i=o.getAttribute("href");if(Ce(o))return;if(a(i),s.preventDefault(),!await Te(i)){L(i);return}const l=![null,"false"].includes(o.getAttribute("keep-scroll-position"));e(i,{keepScrollPosition:l})}function n(s){return s.button===0&&!s.ctrlKey&&!s.shiftKey&&!s.altKey&&!s.metaKey}function r(s){for(;s.tagName!=="A";){const{parentNode:o}=s;if(!o)return null;s=o}return s}}let S=N();function Cn(e){window.addEventListener("popstate",()=>{const t=N(),n=t.historyState.scrollPosition||"scroll-to-top-or-hash",r=t.urlWithoutHash===S.urlWithoutHash,s=!t.historyState.timestamp||!S.historyState.timestamp?null:t.historyState.timestamp<S.historyState.timestamp;S=t,r?window.history.state===null?(Ne(),S=N()):Ve(n):e(n,s)})}function In(e,t){T()!==e&&(Q(),Fn(e,t),S=N())}function N(){return{urlWithoutHash:T({withoutHash:!0}),historyState:q()}}function Ve(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const n=$n();if(n&&n!=="top"){const r=document.getElementById(n)||document.getElementsByName(n)[0];if(r){r.scrollIntoView();return}}t={x:0,y:0}}else a("x"in e&&"y"in e),t=e;kn(t)}function kn(e){const t=()=>window.scrollTo(e.x,e.y),n=()=>window.scrollX===e.x&&window.scrollY===e.y;n()||(t(),!n()&&requestAnimationFrame(()=>{t(),!n()&&setTimeout(async()=>{if(t(),n())return;const r=new Date().getTime();for(;;)if(await en(10),t(),n()||new Date().getTime()-r>100)return},0)}))}function Wn(){window.addEventListener("scroll",Yt(oe,Math.ceil(1e3/3)),{passive:!0}),ze(oe)}function $n(){let{hash:e}=window.location;return e===""?null:(a(e.startsWith("#")),e=e.slice(1),e)}let De=!1;function Nn(){ae(),ze(ae),jn(()=>De&&Q())}function Q(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function ae(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}function ze(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function jn(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function le(e,t){return!!(e!=null&&e._abortRendering||Hn(e,t))}function Hn(e,t){if(!he(e))return!1;if(Be(),t._isFirstRenderAttempt)throw e;return L(t.urlOriginal),!0}En();
